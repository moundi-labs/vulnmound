.PHONY: all test-vulnerable test-mitigation test-poc clean

all: test-vulnerable test-mitigation test-poc

test-vulnerable:
	@echo "Testing vulnerable version..."
	@echo "============================"
	@go run vulnerable.go

test-mitigation:
	@echo ""
	@echo "Testing secure version (mitigation)..."
	@echo "====================================="
	@go run mitigation.go

test-poc:
	@echo ""
	@echo "Testing PoC (Proof of Concept)..."
	@echo "================================="
	@go run poc.go

clean:
	@echo "Cleaning up temporary files..."
	@rm -f /tmp/escaped-file.txt
	@rm -rf /tmp/vulnerable-mount
	@rm -rf /tmp/secure-mount
	@rm -rf /tmp/attack-mount

help:
	@echo "Available targets:"
	@echo "  test-vulnerable  - Run the vulnerable version"
	@echo "  test-mitigation  - Run the secure version"
	@echo "  test-poc        - Run the proof of concept attack"
	@echo "  clean           - Clean up temporary files"
	@echo "  all             - Run all tests"
